---
phase: 03-interactive-visualizations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - src/visualize.py
  - scripts/13_distribution_viz.py
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can view interactive distributions with hover, zoom, and pan"
    - "User can explore correlation heatmap with hierarchical clustering"
    - "All distribution figures saved as Plotly HTML files"
  artifacts:
    - path: "src/visualize.py"
      provides: "Plotly visualization utilities"
      min_lines: 200
      exports: ["create_distribution_histogram", "create_box_plot", "create_correlation_heatmap"]
    - path: "scripts/13_distribution_viz.py"
      provides: "Distribution visualization pipeline"
      min_lines: 300
    - path: "reports/figures/interactive_distributions.html"
      provides: "Interactive distribution plots"
    - path: "reports/figures/interactive_correlation_heatmap.html"
      provides: "Interactive correlation heatmap"
  key_links:
    - from: "scripts/13_distribution_viz.py"
      to: "data/processed/ai_models_deduped.parquet"
      via: "pl.read_ipc()"
      pattern: "pl\\.read_ipc|pl\\.read_parquet"
    - from: "scripts/13_distribution_viz.py"
      to: "data/processed/correlation_analysis_correlation.parquet"
      via: "pl.read_ipc() for correlation matrix"
      pattern: "correlation"
---

# Objective

Create interactive Plotly visualizations for numerical distributions and correlation analysis with hover tooltips, zoom, and pan capabilities.

**Purpose:** Replace static matplotlib figures with interactive Plotly charts that enable data exploration and engagement
**Output:** Interactive distribution histograms, box plots, and correlation heatmap saved as HTML files

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@data/processed/ai_models_deduped.parquet
@data/processed/correlation_analysis_correlation.parquet
@src/analyze.py
@src/statistics.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Plotly dependency and create visualization utilities</name>
  <files>pyproject.toml, src/visualize.py</files>
  <action>
    1. Add plotly>=6.0.0 to pyproject.toml dependencies
    2. Run `poetry lock` to update dependency lock file
    3. Create src/visualize.py with Plotly utilities:
       - create_distribution_histogram(df, column, title): Interactive histogram with hover showing model names, counts, and percentage
       - create_box_plot(df, x_col, y_col, title): Interactive box plot with jitter for outlier visualization
       - create_correlation_heatmap(corr_df, title): Interactive heatmap with hover showing correlation coefficient and p-value
       - configure_layout(fig): Apply consistent theme (plotly_white, readable fonts, proper margins)
    4. Use plotly.express for histograms and box plots, plotly.graph_objects for heatmap
    5. Add model names to hover templates where applicable (Model column)
    6. Enable zoom, pan, and reset buttons in all figures
  </action>
  <verify>
    Run `poetry show plotly` to confirm plotly>=6.0.0 is installed
    Run `python -c "from src.visualize import create_distribution_histogram, create_box_plot, create_correlation_heatmap"` to verify imports work
  </verify>
  <done>
    Plotly dependency added and verified, src/visualize.py created with 3 visualization functions, all functions importable
  </done>
</task>

<task type="auto">
  <name>Task 2: Execute distribution visualization pipeline</name>
  <files>scripts/13_distribution_viz.py, reports/figures/interactive_*.html</files>
  <action>
    1. Create scripts/13_distribution_viz.py with:
       - Load ai_models_deduped.parquet (187 models, 18 columns)
       - Load correlation_analysis_correlation.parquet (5x5 matrix)
       - Create 5 distribution histograms (VIZ-01):
         * intelligence_index: Histogram with hover (Model, IQ, count, %)
         * price_usd: Histogram with hover (Model, Price, count, %)
         * Speed: Histogram with hover (Model, Speed, count, %)
         * Latency: Histogram with hover (Model, Latency, count, %)
         * context_window: Histogram with hover (Model, Context Window, count, %)
       - Create 1 correlation heatmap (VIZ-04):
         * 5x5 Spearman correlation matrix with hierarchical clustering
         * Hover shows correlation coefficient and FDR-adjusted p-value
         * Color scale: RdBu (red=-1, blue=+1) with divergent colors
       - Combine all 6 figures into subplots (2 rows x 3 columns) for comprehensive view
       - Save individual HTML files to reports/figures/interactive_*.html
       - Save combined dashboard to reports/figures/interactive_distributions.html
    2. Use intelligence_index (Int64) column, not "Intelligence Index" (String)
    3. Filter to n=181 models with valid intelligence for intelligence-specific plots
    4. Add descriptive titles with sample sizes (e.g., "Intelligence Index Distribution (n=181)")
    5. Include summary statistics in hover (mean, median, min, max)
    6. Use consistent theme across all plots (plotly_white, font_size=12)
  </action>
  <verify>
    Run `poetry run python scripts/13_distribution_viz.py` and verify:
    - 6 HTML files created in reports/figures/ (5 histograms + 1 heatmap)
    - Combined dashboard created at reports/figures/interactive_distributions.html
    - Open HTML files in browser to confirm hover works, zoom/pan functional
  </verify>
  <done>
    6 interactive distribution visualizations created, all saved as HTML files with hover/zoom/pan, combined dashboard generated
  </done>
</task>

</tasks>

<verification>
Run verification checks:
1. Open reports/figures/interactive_distributions.html in browser - confirm 6 subplots load
2. Test hover on intelligence histogram - should show Model name, IQ, count, percentage
3. Test zoom on price histogram - should enable pan and zoom
4. Test hover on correlation heatmap - should show correlation coefficient and p-value
5. Confirm all figures use consistent theme and readable fonts
6. Verify sample sizes displayed in titles (n=181 for intelligence plots, n=187 for others)
</verification>

<success_criteria>
1. Plotly>=6.0.0 added to pyproject.toml and installed via poetry
2. src/visualize.py created with 3 reusable visualization functions
3. 5 interactive distribution histograms generated (intelligence, price, speed, latency, context_window)
4. 1 interactive correlation heatmap generated with hierarchical clustering
5. All 6 figures saved as HTML files with hover tooltips, zoom, and pan
6. Combined dashboard created showing all 6 visualizations
7. VIZ-01 (distribution histograms) and VIZ-04 (correlation heatmap) satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/03-interactive-visualizations/03-01-SUMMARY.md`
</output>
